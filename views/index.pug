extends layout

block content
  script.
    $(function() {
      $('#pingForm').submit(function(event) {
        //- console.log($('#protestDescription').val());
        event.preventDefault(); // Stops browser from navigating away from page
        var data = $("#protestDescription").serialize();
        console.log(data);
        // build a json object or do something with the form, store in data
        $.post('/', data, function(resp) {
          alert(data);
          // do something when it was successful
        });
      });
    });
    /**
     * For testing if basic geolocation functionality is working
     */
    getLocation();
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            console.log( "Geolocation is not supported by this browser." );
        }
    }
    function showPosition(position) {
        console.log("Location object received");
        console.log( "Latitude: " + position.coords.latitude +
                ", Longitude: " + position.coords.longitude  +
                ", Accuracy " + position.coords.accuracy);
    }

  //- div.top
  //-   form.form-horizontal(method="post", id="loginForm")
  //-     label Username
  //-     input.span3(id="username", type="text", name="User", placeholder="Enter your username")
  //-     label Password
  //-     input.span3(id="password", type="password", name="Password")
  //-     input.btn(type="submit", value="Log In")
  //- div.container
  //-   div.content
  //-     table.table.table-striped
  //-       thead
  //-         tr
  //-           th Table
  //-           th Heading
  //-       tbody
  //-         tr
  //-           td Blah
  //-           td Test
  //-         tr
  //-           td Hello
  //-           td World

  div.container-fluid
    div.row
      div.col-lg-3.col-md-4
        div.card.text-center
          div.card-block
            h3.card-title.mb-3 People are protesting.
            //- form#pingForm(method="post", action="/")
            div.row
              div.col-md-10.offset-md-1
                form#pingForm
                  div.form-group
                    input#protestDescription.form-control(type="text", name="protestDescription", placeholder="Why?")
                  div.form-group.input-group
                    input#protestLocation.form-control(type="text", name="protestLocation", placeholder="Where?")
                    span.input-group-btn
                      button.btn.btn-secondary(type="button")
                        img(src="assets/icons/location.svg")
                  div.form-group
                    button.btn.btn-primary.btn-block(type="submit") Submit
      div.col-lg-9.col-md-8
        div.card
          div.card.block
            div#map

  div.footer